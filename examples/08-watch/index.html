<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>watch</title>
  </head>

  <body>
    <div id="app">
      {{ reversedMessage }}
      <hr />
      {{ user.fullName }}
    </div>

    <script src="../../dist/vue.js"></script>
    <script>
      const vm = new Vue({
        el: "#app",
        data: {
          message: 'hello vue',
          user: {
            firstName: "xxx",
            lastName: "cccc",
            fullName: "",
          },
        },
        computed: {
          reversedMessage: function () {
            return this.message.split("").reverse().join("");
          },
        },
        watch: {
          // 'user.firstName': function (newValue, oldValue) {
          //   this.user.fullName = this.user.firstName + " " + this.user.lastName;
          // },
          // 'user.lastName': function (newValue, oldValue) {
          //   this.user.fullName = this.user.firstName + " " + this.user.lastName;
          // },
          'user': {
            handler: function (newValue, oldValue) {
              this.user.fullName = this.user.firstName + " " + this.user.lastName;
            },
            immediate: true,
            deep: true,
          },
        },
      });

      // vm.$watch(
      //   "user",
      //   function (newValue, oldValue) {
      //     this.user.fullName = newValue.firstName + " " + newValue.lastName;
      //   },
      //   {
      //     immediate: true,
      //     deep: true,
      //   }
      // );
    </script>
  </body>
</html>
